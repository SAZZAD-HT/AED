@{
    Layout = null; // This disables the default layout, removing the header and footer
    ViewData["Title"] = "OTPConfirmPage";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"]</title>

    <!-- Custom CSS and Tailwind CSS -->
    <link rel="stylesheet" href="~/css/styles.css" asp-append-version="true" />
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

    <!-- Montserrat Font -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Montserrat', sans-serif;
        }

        .slider {
            position: relative;
            width: 100%;
            height: 50px;
            background-color: #f0f0f0;
            border-radius: 25px;
            cursor: pointer;
            border: 1px solid #ddd;
            overflow: hidden; /* Added for filling color */
        }

        .slider-track {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background-color: #4a90e2;
            width: 0%; /* Initial track width */
            transition: width 0.3s;
        }

        .slider-handle {
            position: absolute;
            top: 0;
            left: 0;
            width: 50px;
            height: 50px;
            background-color: #4a90e2;
            border-radius: 25px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .ml-custom {
            margin-left: 4.25rem; /* 68px */
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4 md:p-0" style="background-image: url('@Url.Content("~/css/Images/Body.png")'); background-size: cover; background-position: center;">

    <div class="bg-white shadow-md rounded-lg p-4 max-w-xs sm:max-w-md w-full relative">
        <!-- Logo and Title inside the confirm OTP container -->
        <div class="flex flex-col items-center mb-6">
            <img src="@Url.Content("~/css/Images/BAT_Bangladesh_Logo.png")" alt="Logo" class="w-18 h-18 mb-2 ml-custom" />
            <h1 class="text-2xl font-bold text-blue-900 tracking-wide">BATB AUCTION 2024</h1>
        </div>

        <h2 class="text-lg sm:text-2xl font-bold text-center mb-4">Confirm OTP</h2>

        <!-- Form updated to use post method and point to OTPConfirmPage action -->
        <form id="otpForm" method="post" action="@Url.Action("OTPConfirmPage", "Auction")">
            <div class="mb-4">
                <label for="OTP" class="block text-sm font-semibold mb-2">OTP</label>
                <input id="OTP" name="OTP" type="text" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-600" placeholder="Enter your OTP" required />
            </div>

            <!-- Slider instead of submit button -->
            <div class="slider mb-4" id="slider">
                <div class="slider-track" id="sliderTrack"></div>
                <div class="slider-handle" id="sliderHandle"></div>
                <span class="absolute inset-y-0 right-3 flex items-center text-blue-600 text-sm">Slide to Confirm</span>
            </div>
          
        </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        // Slider functionality
        const slider = document.getElementById('slider');
        const sliderHandle = document.getElementById('sliderHandle');
        const sliderTrack = document.getElementById('sliderTrack');
        let isDragging = false;
        let startX = 0;

        sliderHandle.addEventListener('mousedown', (event) => {
            isDragging = true;
            startX = event.clientX - sliderHandle.offsetLeft;
            slider.style.cursor = 'grabbing';
        });

        document.addEventListener('mousemove', (event) => {
            if (!isDragging) return;

            let x = event.clientX - startX;
            if (x < 0) x = 0;
            if (x > slider.offsetWidth - sliderHandle.offsetWidth) x = slider.offsetWidth - sliderHandle.offsetWidth;

            sliderHandle.style.left = x + 'px';
            sliderTrack.style.width = (x + sliderHandle.offsetWidth / 2) + 'px';
        });

        document.addEventListener('mouseup', () => {
            if (!isDragging) return;

            isDragging = false;
            slider.style.cursor = 'pointer';

            if (sliderHandle.offsetLeft >= slider.offsetWidth - sliderHandle.offsetWidth - 10) {
                document.getElementById('otpForm').submit();
            } else {
                resetSlider();
            }
        });

        function resetSlider() {
            sliderHandle.style.left = '0px';
            sliderTrack.style.width = '0px';
        }

        // Display alert if there is an error message
        @if (TempData["ErrorMessage"] != null)
        {
            <text>
                    alert('@TempData["ErrorMessage"]');
            </text>
        }
    </script>
</body>
</html>
