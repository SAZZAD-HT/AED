@{
    Layout = null; // This disables the default layout, removing the header and footer
    ViewData["Title"] = "Product Catalogue";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"]</title>

    <!-- Custom CSS and Tailwind CSS -->
    <link rel="stylesheet" href="~/css/styles.css" asp-append-version="true" />
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

    <!-- Montserrat Font -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #0e2b63; /* Background color as requested */
            color: white; /* Text color for better readability */
        }

        tr:hover {
            background-color: #afca0b; /* Light blue background on hover */
            transition: background-color 0.3s ease;
        }

        .selected {
            transform: scale(1.05); /* Slightly enlarge the row */
            transition: transform 0.3s ease-in-out;
        }

        .pl {
            width: 6em;
            height: 6em;
        }

        .pl__ring {
            animation: ringA 2s linear infinite;
        }

        .pl__ring--a {
            stroke: #f42f25;
        }

        .pl__ring--b {
            animation-name: ringB;
            stroke: #f49725;
        }

        .pl__ring--c {
            animation-name: ringC;
            stroke: #255ff4;
        }

        .pl__ring--d {
            animation-name: ringD;
            stroke: #f42582;
        }

        /* Animations */
        @@keyframes ringA {
            from, 4% {
                stroke-dasharray: 0 660;
                stroke-width: 20;
                stroke-dashoffset: -330;
            }

            12% {
                stroke-dasharray: 60 600;
                stroke-width: 30;
                stroke-dashoffset: -335;
            }

            32% {
                stroke-dasharray: 60 600;
                stroke-width: 30;
                stroke-dashoffset: -595;
            }

            40%, 54% {
                stroke-dasharray: 0 660;
                stroke-width: 20;
                stroke-dashoffset: -660;
            }

            62% {
                stroke-dasharray: 60 600;
                stroke-width: 30;
                stroke-dashoffset: -665;
            }

            82% {
                stroke-dasharray: 60 600;
                stroke-width: 30;
                stroke-dashoffset: -925;
            }

            90%, to {
                stroke-dasharray: 0 660;
                stroke-width: 20;
                stroke-dashoffset: -990;
            }
        }

        @@keyframes ringB {
            from, 12% {
                stroke-dasharray: 0 220;
                stroke-width: 20;
                stroke-dashoffset: -110;
            }

            20% {
                stroke-dasharray: 20 200;
                stroke-width: 30;
                stroke-dashoffset: -115;
            }

            40% {
                stroke-dasharray: 20 200;
                stroke-width: 30;
                stroke-dashoffset: -195;
            }

            48%, 62% {
                stroke-dasharray: 0 220;
                stroke-width: 20;
                stroke-dashoffset: -220;
            }

            70% {
                stroke-dasharray: 20 200;
                stroke-width: 30;
                stroke-dashoffset: -225;
            }

            90% {
                stroke-dasharray: 20 200;
                stroke-width: 30;
                stroke-dashoffset: -305;
            }

            98%, to {
                stroke-dasharray: 0 220;
                stroke-width: 20;
                stroke-dashoffset: -330;
            }
        }

        @@keyframes ringC {
            from {
                stroke-dasharray: 0 440;
                stroke-width: 20;
                stroke-dashoffset: 0;
            }

            8% {
                stroke-dasharray: 40 400;
                stroke-width: 30;
                stroke-dashoffset: -5;
            }

            28% {
                stroke-dasharray: 40 400;
                stroke-width: 30;
                stroke-dashoffset: -175;
            }

            36%, 58% {
                stroke-dasharray: 0 440;
                stroke-width: 20;
                stroke-dashoffset: -220;
            }

            66% {
                stroke-dasharray: 40 400;
                stroke-width: 30;
                stroke-dashoffset: -225;
            }

            86% {
                stroke-dasharray: 40 400;
                stroke-width: 30;
                stroke-dashoffset: -395;
            }

            94%, to {
                stroke-dasharray: 0 440;
                stroke-width: 20;
                stroke-dashoffset: -440;
            }
        }

        @@keyframes ringD {
            from, 8% {
                stroke-dasharray: 0 440;
                stroke-width: 20;
                stroke-dashoffset: 0;
            }

            16% {
                stroke-dasharray: 40 400;
                stroke-width: 30;
                stroke-dashoffset: -5;
            }

            36% {
                stroke-dasharray: 40 400;
                stroke-width: 30;
                stroke-dashoffset: -175;
            }

            44%, 50% {
                stroke-dasharray: 0 440;
                stroke-width: 20;
                stroke-dashoffset: -220;
            }

            58% {
                stroke-dasharray: 40 400;
                stroke-width: 30;
                stroke-dashoffset: -225;
            }

            78% {
                stroke-dasharray: 40 400;
                stroke-width: 30;
                stroke-dashoffset: -395;
            }

            86%, to {
                stroke-dasharray: 0 440;
                stroke-width: 20;
                stroke-dashoffset: -440;
            }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen px-4">
    <div class="logo-container items-center ml-12">
        <img src="/css/Images/BAtLogoWhite.png" alt="Logo" class="w-96 h-auto object-top">
    </div>
    <div class="absolute top-4 right-4">
        <a href="@Url.Action("Login", "Auction")" class="text-red-500 hover:text-red-700 font-semibold">Logout</a>
    </div>
    <div class="logo-container text-center mr-3">
        <h1 class="text-2xl font-bold">Product Catalog</h1><br>
    </div>

    <!-- Product Table Container -->
    <div class="bg-white text-black shadow-md rounded-lg p-6 max-w-7xl w-full overflow-x-auto">
        <div id="loader" class="flex justify-center items-center">
            <svg class="pl" width="240" height="240" viewBox="0 0 240 240">
                <circle class="pl__ring pl__ring--a" cx="120" cy="120" r="105" fill="none" stroke="#000" stroke-width="20" stroke-dasharray="0 660" stroke-dashoffset="-330" stroke-linecap="round"></circle>
                <circle class="pl__ring pl__ring--b" cx="120" cy="120" r="35" fill="none" stroke="#000" stroke-width="20" stroke-dasharray="0 220" stroke-dashoffset="-110" stroke-linecap="round"></circle>
                <circle class="pl__ring pl__ring--c" cx="85" cy="120" r="70" fill="none" stroke="#000" stroke-width="20" stroke-dasharray="0 440" stroke-linecap="round"></circle>
                <circle class="pl__ring pl__ring--d" cx="155" cy="120" r="70" fill="none" stroke="#000" stroke-width="20" stroke-dasharray="0 440" stroke-linecap="round"></circle>
            </svg>
        </div>

        <table id="productTable" class="min-w-full bg-white hidden">
            <thead class="bg-gray-200">
                <tr>
                    <th class="text-left py-3 px-4">Image</th>
                    <th class="text-left py-3 px-4">Item ID</th>
                    <th class="text-left py-3 px-4">Item Name</th>
                    <th class="text-left py-3 px-4">Brand</th>
                    <th class="text-left py-3 px-4">Model</th>
                    <th class="text-left py-3 px-4">Colour</th>
                    <th class="text-left py-3 px-4">Location</th>
                    <th class="text-left py-3 px-4">CC</th>
                    <th class="text-left py-3 px-4">Type</th>
                    <th class="text-left py-3 px-4">Action</th>
                </tr>
            </thead>
            <tbody id="itemList"></tbody>
        </table>
    </div>

    <script>
        async function fetchItems() {
            try {
                document.getElementById('loader').style.display = 'flex';
                document.getElementById('productTable').style.display = 'none';

                const response = await fetch('/Auction/ItemListJSON');
                const items = await response.json();

                if (items && items.length > 0) {
                    const itemList = document.getElementById('itemList');
                    itemList.innerHTML = '';

                    // Loop through the items and append rows to the table
                    for (const item of items) {
                        const row = document.createElement('tr');
                        row.className = 'border-b cursor-pointer';

                        row.innerHTML = `
                                    <td class="py-3 px-4"><img id="img-${item.itemId}" alt="Loading image..." class="w-24 h-24 object-cover rounded" /></td>
                                    <td class="py-3 px-4">${item.itemId}</td>
                                    <td class="py-3 px-4">${item.itemName}</td>
                                    <td class="py-3 px-4">${item.brand}</td>
                                    <td class="py-3 px-4">${item.model}</td>
                                    <td class="py-3 px-4">${item.colour}</td>
                                    <td class="py-3 px-4">${item.location}</td>
                                    <td class="py-3 px-4">${item.cc}</td>
                                    <td class="py-3 px-4">${item.type}</td>
                                    <td class="py-3 px-4"><button onclick="placeBid('${item.itemId}')" class="bg-blue-500 text-white rounded px-4 py-2 hover:bg-blue-600 transform hover:scale-105 shadow-md hover:shadow-lg transition duration-300">Place Bid</button></td>
                                `;

                        itemList.appendChild(row);

                        
                        loadImage(item.itemId, 'pic1');
                    }

                    document.getElementById('loader').style.display = 'none';
                    document.getElementById('productTable').style.display = 'table';
                }
            } catch (error) {
                console.error('Error fetching items:', error);
                document.getElementById('loader').style.display = 'none';
            }
        }
        document.getElementById('itemList').addEventListener('click', function (event) {
            const row = event.target.closest('tr'); // Find the closest row
            if (row) {
                const button = row.querySelector('button');
                if (button) button.click(); // Trigger button click if it exists
                row.classList.add('selected'); // Add selected class for visual feedback
            }
        });
        async function loadImage(itemId, picNumber) {
            try {
                debugger;
                const response = await fetch(`/Auction/ImageById?ItemId=${itemId}&PicNumber=${picNumber}`);
                const data = await response.json();

                if (data ) {
                    document.getElementById(`img-${itemId}`).src = `${data}`;
                } else {
                    document.getElementById(`img-${itemId}`).alt = 'No Image Found';
                }
            } catch (error) {
                console.error('Error loading image:', error);
                document.getElementById(`img-${itemId}`).alt = 'Error loading image';
            }
        }

        window.onload = fetchItems;

        function placeBid(productId) {
            window.location.href = `/Auction/ProductCatalogueDetails?productId=${productId}`;
        }
    </script>
</body>
</html>
